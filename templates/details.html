<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/font-awesome/css/font-awesome.min.css">
    <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet'  type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
    <link href="/static/css/details.css" rel="stylesheet" type='text/css'>
    <title>Kyiv Showrooms</title>
    <style>
      
      
    </style>
  </head>
  <body data-spy="scroll" data-target=".navbar" data-offset="20" onload="initMap(); placeMarker(showroom);">
    
    <!--Navigation bar -->
    <nav class="navbar navbar-light bg-faded navbar-fixed-top" style="/*background: transparent;*/ border: none; color: black;">
      <div class="container">
        
          <!--button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#myNavbar" aria-controls="exCollapsingNavbar" aria-expanded="false" aria-label="Toggle navigation"></button>

            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span> 
          </button-->
          <a class="navbar-brand" href="/" style="color:black; font-family: 'Lobster';">Kyiv Showrooms</a>
        
        
          <ul class="nav navbar-nav">
            <li class="nav-item active" ><a href="#section0" class="nav-link">{{place.title}}</a></li>
            <li class="nav-item" ><a href="#gallery-body" class="nav-link">Gallery</a></li>
            {% if place.address %}
            <li class="nav-item" ><a href="#section2" class="nav-link">Location</a></li>
            {% endif %}
            <li class="nav-item float-lg-right"><a href="#footer" class="nav-link">Contacts</a></li>
          </ul>
      
      </div>
    </nav>


    <!--Information block -->
    <div class ="container page-block" id="section0" style="padding-top: 100px; height:650px; overflow-y: scroll; "> 
    <div class="row">
    <div class="col-md-12 col-sm-12 col-lg-12" >
    
      <div class="col-md-5 col-sm-5 col-lg-5" style="max-height:650px; overflow-y: scroll;">
        <img src="//graph.facebook.com/{{ place.placeId }}/picture?type=large" class="img-thumbnail img-fluid" 
        alt="place_picture" width="395" height="306">
       
      </div>

      <div class="col-md-6 col-sm-6 col-lg-6" style="max-height:650px; overflow-y: scroll;">   
       <p><h2>
         {{ place.title }}
       </h2></p>
       <p class="italic">
         <i> {{ place.pourpose_type }} </i>
       </p>
       <p class="description">
         {{ place.description }}
       </p>

       {% if place.address %}
       <p>
         <strong>Address:</strong> {{ place.address }}
       </p>
       <!--p>
         Address second line with details should be added to db first
       </p-->
       <p>
         <strong>Working hours:</strong> {{ place.open_h }} {% if place.close_h %} - {{ place.close_h }} {% endif %}
       </p>
       {% endif %}

       <!-- Social media block -->
       <!--div class="row"-->
       {% if place.link_fb %}
        <a href={{ place.link_fb }} target="_blank"><img src="/static/fb.jpg" alt="HTML tutorial" style="width:21px;height:21px;border:5px; margin-right:2px; margin-bottom:5px;"></a>
       {% endif %}
       {% if place.link_inst %}
          <a href={{ place.link_inst }}  target="_blank"><img src="/static/inst.png" alt="HTML tutorial" style="width:21px;height:21px;border:5px;margin-right:2px; margin-bottom:5px;"></a>
       {% endif %}
       {% if place.link_site %}
          <a href= {{ place.link_site }} target="_blank"><img src="/static/site.jpg" alt="HTML tutorial" style="width:21px;height:21px;border:5px; margin-bottom:5px;"></a>
        {% endif %}
        <!--/div-->
      </div>

    </div>
    </div>
    </div>

  <!--Loading icon-->
  <div class = "container" id="loading_capture">
    <img src="/static/loading.gif"/>
  </div>

  <!--Gallery block -->
  <div class="container page-block" >
    <div class="col-sm-11 col-md-11 col-lg-11 col-md-offset-1 col-lg-offset-1 card-columns" id="gallery-body"> </div>
  </div>



  <!--Carousel block, currently hidden-->
  <div id="section1" class="container hidden page-block" style="height:650px;" hidden>
    <div id="mycarousel" class="carousel slide" data-ride="carousel" style="border-bottom: 20px;">

      <div class="carousel-inner" role="listbox" id="carusel-body" style="width:100%;height:650px; margin: auto; background-size: cover;">

        <div class="item active" id="carusel_first">
          <img src="" alt="" class="img-responsive img-fluid center-block" style="margin: 0 auto;">
        </div>

      </div>
     
     <!-- Left and right controls -->
      <a class="left carousel-control" href="#mycarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#mycarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span> 
      </a>
 
    </div>
  </div>

  <!--Map block -->
  {% if place.address %}
  <div id="section2" class="container page-block" style="height:450px;">
    <div сlass="col-md-10 col-sm-10 map">
      <div  class="google-map-canvas" id="map"  style=" height:450px; border-width:10px;"></div>
    </div>
  </div>
  {% endif %}

 <div class="container page-block">
   <div class="row">
   <p class="small grey" style="color:grey;"><i> All provided data were gathered from the store open social medias and has store's ownership. </i></p>
   </div>
 </div>


  <footer >
    <div id="footer" style="border: 2px solid #fff; margin-top: 20;padding-bottom:0px; margin-bottom: 0px;" class="bg-faded well">
      <div class="container">
        <div class="row" style="margin-top: 10px;">  
          <a href="mailto:kyivshowrooms@gmail.com"><img src="/static/mail.png" style="width:21px;height:21px;border:10;"></a>
        </div>
        <div class="row" style="padding-top: 10px; margin-bottom: 10px;">
          <p>© 2016 Olena Marushchenko</p>
        </div> 
      </div>
  </footer>
  
  <!--Parsing for Showroom entity to js var-->
  <script>
  var showroom = {
    "placeId"       : "{{ place.placeId }}",
    'title'         : "{{ place.title }}",
    'pourpose_type' : "{{ place.pourpose_type }}",
    'address'       : "{{ place.address }}",
    'location_lat'  : "{{ place.location_lat }}",
    'location_lng'  : "{{ place.location_lng }}",
    'open_h'        : "{{ place.open_h }}",
    'close_h'       : "{{ place.close_h }}",
    'link_fb'       : "{{ place.link_fb }}",
    'link_inst'     : "{{ place.link_inst }}",
    'link_site'     : "{{ place.link_site }}",
  };
  var po = {{ posts | safe }};

  </script>
  
  <!--Google Analitics-->
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-87589170-1', 'auto');
      ga('send', 'pageview');

  </script>

  <script>
    $(document).ready (function(){
      
      
      for (i in po){
           
      //var post = po[i];
      var post = po[i];
      post = JSON.parse(post);

        var Block = '<div class="card" id="image"> <a href='+ post["link"] +' target="_blank"><img class="card-img-top img-fluid" src=' +
                    post["full_picture"] +' target="_blank" alt="Card image cap"></a>';
  
        if ( post["message"] ){


          
          if (post["message"].length > message_len_limit){

            Block += //original text
                     '<div class="card-block" > <div class="to_translate"><p class="card-text">' + 
                      post["message"].slice(0,message_len_limit-1) +
                     '<a href='+ post["link"] + ' target="_blank">...</a></p>' +
                     '<p><a href="#" class="button_to_translatation small clickable">Show translation</a></p></div>' +
                     //translated text, hidden while composing
                     '<div class="google_translate_en" style="display:none"> <p class="card-text"> <a href='+ post["link"] + ' target="_blank">...</a> </p>' +
                     '<p><a href="#"  class="button_to_original small clickable">Show original</a></p> </div></div>';

         }
          else {

            Block += //original text
                     '<div class="card-block"> <div class="to_translate"><p class="card-text">' + post["message"] + 
                     '</p><p><a href="#" class="button_to_translatation small clickable">Show translation</a><p></div>' +
                     //translated text, hidden while composing
                     '<div class="google_translate_en" style="display:none"><p class="card-text"></p>' + 
                     '<p><a href="#"  class="button_to_original small clickable">Show original</a></p></div></div> ';

              }
        }
        
        else Block += '</div>';

        var gallery = $("#gallery-body");
        if (Number(i) === 0){
          $("#gallery-body").prepend(Block);
          
        }
        else  {
          $("#gallery-body #image:last").after(Block);
        }

    };
    $("#loading_capture").fadeOut("slow");
});

  </script>

    <!--Google Translate API-->
    <script src="https://apis.google.com/js/api.js"></script>

    <!--Google Map API-->
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDC1GypWJ6A4tUCTPENVNgFpLsSezpalvk&callback=initMap"></script>

    <!--Bootstrap4-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js"></script>

    <!--Custom scripts loading-->
    <script src="/static/js/map.js"></script>
    <script src="/static/js/details.js"></script>
    
  </body>
</html>

